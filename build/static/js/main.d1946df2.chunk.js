(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{108:function(e,t,a){},129:function(e,t,a){},228:function(e,t,a){},230:function(e,t,a){},232:function(e,t,a){},234:function(e,t,a){},236:function(e,t,a){},238:function(e,t,a){},240:function(e,t,a){},242:function(e,t,a){},244:function(e,t,a){},246:function(e,t,a){},248:function(e,t,a){},250:function(e,t,a){},252:function(e,t,a){},254:function(e,t,a){},256:function(e,t,a){},258:function(e,t,a){},260:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(37),i=a.n(r),c=a(21),o=a(28),l=a(85),u=(a(106),a(108),a(4)),m=a(5),d=a(8),p=a(6),h=a(7),f=a(95),b=a(266),y=a(262),E=a(265),v=a(3),g=a.n(v),C=(a(129),a(261)),N=a(92),k=a(86),S=a.n(k),w=a(87),T=a.n(w),O=a(90),B=a.n(O),j=a(91),U=a.n(j),I=a(88),D=a.n(I),P=a(89),x=a.n(P);var A=Object(N.withStyles)({root:{flexGrow:1},grow:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20},link:{color:"#fff"}})(function(e){var t=e.classes;return s.a.createElement("div",{className:t.root},s.a.createElement(S.a,{position:"static"},s.a.createElement(T.a,null,s.a.createElement(D.a,{className:t.menuButton,color:"inherit","aria-label":"Menu"},s.a.createElement(x.a,null)),s.a.createElement(B.a,{variant:"h6",color:"inherit",className:t.grow},"Book Bus"),s.a.createElement(U.a,{color:"inherit"},s.a.createElement(C.a,{className:t.link,to:"/login"},"Logout")))))}),F=a(14),L=a(19),M=a(264),_=function(e){return s.a.createElement("div",{className:""},s.a.createElement("div",{className:e.className},s.a.createElement("strong",null,e.type,"!")," ",e.msg,"."))},V=function(e){return e.children},R=function(e){return{type:"LOGIN_USER",payload:e}},W=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).adminTab=function(){a.setState({adminClass:"nav-item nav-link active",userClass:"nav-item nav-link",admin:!0})},a.userTab=function(){a.setState({adminClass:"nav-item nav-link",userClass:"nav-item nav-link active",admin:!1})},a.state={username:"",password:"",adUserName:"",adPassword:"",userClass:"nav-item nav-link active",adminClass:"nav-item nav-link",admin:!1},a.user=a.user.bind(Object(L.a)(Object(L.a)(a))),a.register=a.register.bind(Object(L.a)(Object(L.a)(a))),a.admin=a.admin.bind(Object(L.a)(Object(L.a)(a))),a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"handleUserInput",value:function(e){var t=e.target.name,a=e.target.value;this.setState(Object(F.a)({},t,a))}},{key:"admin",value:function(){var e=this.state,t=e.adUserName,a=e.adPassword;this.props.checkAdmin({username:t,password:a})}},{key:"user",value:function(){var e=this.state,t=e.username,a=e.password;this.props.checkUser({username:t,password:a})}},{key:"register",value:function(){this.props.history.push("/register")}},{key:"componentWillMount",value:function(){console.log("login===>")}},{key:"render",value:function(){var e=this,t={msg:"Username or Password are Invalid",type:"Warning",className:"alert alert-warning"};if(this.props.user.hasOwnProperty("adminAccess")&&!0===this.props.user.adminAccess)return s.a.createElement(M.a,{to:"/admin"});if(!0===this.props.user.userAccess)return s.a.createElement(M.a,{to:"/user"});var a={marginTop:"20px"},n={cursor:"pointer"},r=null;return r=this.state.admin?s.a.createElement(V,null,s.a.createElement("div",{className:"offset-md-4 col-md-4 "},s.a.createElement("input",{style:a,type:"text",placeholder:"Admin Name",name:"adUserName",onChange:function(t){return e.handleUserInput(t)},className:"form-control"})),s.a.createElement("div",{className:"offset-md-4 col-md-4 "},s.a.createElement("input",{style:a,type:"password",placeholder:"Password",name:"adPassword",onChange:function(t){return e.handleUserInput(t)},className:"form-control"}),s.a.createElement("br",null),s.a.createElement("button",{type:"button",style:a,onClick:this.admin,className:"btn btn-primary"},"Secure Login"),"Failed"===this.props.user.login?s.a.createElement(_,t):null)):s.a.createElement(V,null,s.a.createElement("div",{className:"offset-md-4 col-md-4 "},s.a.createElement("input",{style:a,type:"text",placeholder:"User Name",onChange:function(t){return e.handleUserInput(t)},name:"username",className:"form-control"})),s.a.createElement("div",{className:"offset-md-4 col-md-4 "},s.a.createElement("input",{style:a,type:"password",placeholder:"Password",name:"password",className:"form-control",onChange:function(t){return e.handleUserInput(t)}}),s.a.createElement("br",null),s.a.createElement("button",{type:"button",style:{margin:"20px"},onClick:this.register,className:"btn btn-primary"},"Register"),s.a.createElement("button",{type:"button",style:{margin:"20px"},onClick:this.user,className:"btn btn-success"},"Login"),s.a.createElement("button",{type:"button",style:{margin:"20px"},className:"btn btn-success"},s.a.createElement("a",{href:"/login/google"},"Google+")),"Failed"===this.props.user.login?s.a.createElement(_,t):null)),s.a.createElement(V,null,s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"offset-md-4 col-md-4 "},s.a.createElement("nav",{style:a},s.a.createElement("div",{className:"nav nav-tabs"},s.a.createElement("span",{className:this.state.userClass,style:n,onClick:this.userTab},"User"),s.a.createElement("span",{className:this.state.adminClass,style:n,onClick:this.adminTab},"Admin"))))),s.a.createElement("div",{className:"row"},r))}}]),t}(s.a.Component),G=Object(c.b)(function(e){return{user:e.user}},function(e){return{checkUser:function(t){var a;e((a=t,function(e){return g.a.get("/login/users",{params:a}).then(function(t){e(R(t.data))}).catch(function(e){throw e})}))},checkAdmin:function(t){var a;e((a=t,function(e){return g.a.get("/login/admin",{params:a}).then(function(t){e({type:"LOGIN_ADMIN",payload:t.data})}).catch(function(e){throw e})}))},logoutUser:function(){e(function(e){e({type:"LOGOUT_USER",payload:{}})})}}})(W),q=(a(228),function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(s)))).state={cities:[],name:"",description:"",fromCity:"",toCity:"",fromCityTime:"",toCityTime:"",duration:0,totalSeats:0,price:0,msgProps:{bool:!1,msg:"",type:"",className:""}},a.addBus=function(){for(var e=a.state,t=e.name,n=e.description,s=e.fromCity,r=e.toCity,i=e.fromCityTime,c=e.toCityTime,o=e.duration,l=e.totalSeats,u=e.price,m=[],d=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],p=0;p<l/5;p++){var h={row:d[p],status:["unbooked","unbooked","unbooked","unbooked","unbooked"]};m.push(h)}g.a.post("http://localhost:8080/bus/addBus",{name:t,description:n,fromCity:s,toCity:r,fromCityTime:i,toCityTime:c,duration:o,totalSeats:l,price:u,seatStatus:m}).then(function(e){a.setState({msgProps:{bool:!0,msg:"Bus Added",type:"Success",className:"alert alert-success"}}),a.clearCache()}).catch(function(e){throw a.setState({msgProps:{bool:!0,msg:"Error",type:"Warning",className:"alert alert-warning"}}),a.clearCache(),e})},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;g.a.get("http://localhost:8080/city/viewCity").then(function(t){e.setState({cities:t.data.cities})}).catch(function(e){throw e})}},{key:"handleUserInput",value:function(e){var t=e.target.name,a=e.target.value;"totalSeats"===t&&(a*=5),this.setState(Object(F.a)({},t,a))}},{key:"clearCache",value:function(){this.setState({name:"",description:"",fromCity:"",toCity:"",fromCityTime:"",toCityTime:"",duration:0,totalSeats:0,price:0})}},{key:"render",value:function(){var e=this,t=this.state.cities.map(function(e){return console.log(e),s.a.createElement("option",{value:e.cityName,key:e._id},e.cityName)});return s.a.createElement("div",{className:"Addbus"},s.a.createElement("label",{htmlFor:"fromCity"},"From City:"),s.a.createElement("select",{name:"fromCity",onChange:function(t){return e.handleUserInput(t)}},s.a.createElement("option",{value:"",selected:!0}),t),s.a.createElement("label",{htmlFor:"toCity"},"To City:"),s.a.createElement("select",{name:"toCity",onChange:function(t){return e.handleUserInput(t)}},s.a.createElement("option",{value:"",selected:!0}),t),s.a.createElement("br",null),s.a.createElement("label",{htmlFor:"name"},"Bus Name:"),s.a.createElement("input",{type:"text",onChange:function(t){return e.handleUserInput(t)},value:this.state.name,name:"name",placeholder:"Name"}),s.a.createElement("label",{htmlFor:"duration"},"Duration:"),s.a.createElement("input",{type:"number",onChange:function(t){return e.handleUserInput(t)},value:this.state.duration,name:"duration",placeholder:"Duration Time"}),s.a.createElement("br",null),s.a.createElement("textarea",{onChange:function(t){return e.handleUserInput(t)},value:this.state.description,placeholder:"Description",className:"form-control",rows:"5",id:"comment",name:"description"}),s.a.createElement("label",{htmlFor:"fromCityTime"},"Source Time:"),s.a.createElement("input",{type:"text",onChange:function(t){return e.handleUserInput(t)},value:this.state.fromCityTime,name:"fromCityTime",placeholder:"Source Time"}),s.a.createElement("label",{htmlFor:"toCityTime"},"Destination Time:"),s.a.createElement("input",{type:"text",onChange:function(t){return e.handleUserInput(t)},value:this.state.toCityTime,name:"toCityTime",placeholder:"Destination Time"}),s.a.createElement("br",null),s.a.createElement("label",{htmlFor:"price"},"Price:"),s.a.createElement("input",{type:"number",onChange:function(t){return e.handleUserInput(t)},value:this.state.price,name:"price",placeholder:"Price"}),s.a.createElement("label",{htmlFor:"totalSeats"},"Total row of seats in Bus:"),s.a.createElement("input",{type:"number",onChange:function(t){return e.handleUserInput(t)},name:"totalSeats",placeholder:"Total row of seats in Bus"}),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("button",{className:"btn btn-primary",onClick:this.addBus,style:{margin:"10px"}},"Add Bus"),1==this.state.msgProps.bool?s.a.createElement(_,this.state.msgProps):null)}}]),t}(n.Component)),J=(a(230),function(e){console.log(e);var t={fontWeight:"normal",fontSize:"25px",margin:"auto"};return s.a.createElement(V,null,s.a.createElement("div",{className:"row ViewBus"},s.a.createElement("div",{className:"col-md-3"},s.a.createElement("p",{className:"BusDetail"},e.busName),s.a.createElement("p",null,e.busDescription)),s.a.createElement("div",{className:"col-md-2 ",style:{margin:"auto"}},s.a.createElement("p",{style:t},e.sourceTime),s.a.createElement("p",null,e.source)),s.a.createElement("div",{className:"col-md-2",style:{margin:"auto"}},s.a.createElement("p",{style:t},e.destinationTime),s.a.createElement("p",null,e.destination)),s.a.createElement("div",{className:"col-md-1",style:{margin:"auto",textAlign:"center"}},s.a.createElement("p",{style:{margin:"auto"}},"Duration:"),s.a.createElement("p",null,e.duration," hrs")),s.a.createElement("div",{className:"col-md-4 ",style:{margin:"auto"}},s.a.createElement("p",null,"Price:\u20b9",e.price),s.a.createElement("p",null,"Total Seats:",e.seat),s.a.createElement("button",{type:"button",className:"btn btn-success",onClick:e.update},"Update"),s.a.createElement("button",{type:"button",className:"btn btn-warning",onClick:e.delete},"Delete"))))}),z=function(e){return e.busses.map(function(t){return s.a.createElement(J,{busName:t.name,busDescription:t.description,source:t.fromCity,destination:t.toCity,destinationTime:t.fromCityTime,sourceTime:t.toCityTime,price:t.price,duration:t.duration,seat:t.totalSeats,key:t._id,update:function(){return e.update(t._id)},delete:function(){return e.delete(t._id)}})})},H=(a(232),function(e){return s.a.createElement("input",{type:"button",onClick:e.clicked,className:"AdminNavigationButton",value:e.children})}),Y=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(s)))).state={cityName:"",cityDescription:"",msgProps:{bool:!1,msg:"",type:"",className:""}},a.handleUserInput=function(e){var t=e.target.name,n=e.target.value;a.setState(Object(F.a)({},t,n))},a.addCity=function(){var e=a.state,t=e.cityName,n=e.cityDescription;g.a.post("http://localhost:8080/city/addCity",{cityName:t,cityDescription:n}).then(function(e){a.setState({msgProps:{bool:!0,msg:"City Added",type:"Success",className:"alert alert-success"}}),a.clearCache()}).catch(function(e){throw a.setState({msgProps:{bool:!0,msg:"Error",type:"Warning",className:"alert alert-warning"}}),a.clearCache(),e})},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"clearCache",value:function(){this.setState({cityName:"",cityDescription:""})}},{key:"render",value:function(){var e=this;return s.a.createElement(V,null,s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"offset-md-4 col-md-4 "},s.a.createElement("label",{htmlFor:"cityName"},"City Name:"),s.a.createElement("input",{type:"text",required:"",placeholder:"City Name",onChange:function(t){return e.handleUserInput(t)},value:this.state.cityName,name:"cityName",className:"form-control"})),s.a.createElement("div",{className:"offset-md-4 col-md-4 "},s.a.createElement("label",{htmlFor:"cityDescription"},"Description:"),s.a.createElement("textarea",{onChange:function(t){return e.handleUserInput(t)},value:this.state.cityDescription,className:"form-control",rows:"5",id:"comment",name:"cityDescription"}))),s.a.createElement("button",{className:"btn btn-primary",onClick:this.addCity,style:{margin:"10px"}},"Add"),1==this.state.msgProps.bool?s.a.createElement(_,this.state.msgProps):null)}}]),t}(s.a.Component),$=(a(234),function(e){return s.a.createElement("div",{className:"card text-center",style:{width:"30%",margin:"auto",marginTop:"20px"}},s.a.createElement("div",{className:"card-body"},s.a.createElement("h5",{className:"card-title"},e.name),s.a.createElement("p",{className:"card-text"},e.description,"."),s.a.createElement("a",{className:"btn btn-primary",onClick:e.update},"Update"),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("a",{className:"btn btn-warning",onClick:e.delete},"Delete")))}),K=function(e){return e.cities.map(function(t){return s.a.createElement($,{name:t.cityName,description:t.cityDescription,update:function(){return e.update(t._id)},delete:function(){return e.delete(t._id)},key:t._id})})},Q=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(s)))).state={cityName:a.props.update.cityName,cityDescription:a.props.update.cityDescription,msgProps:{bool:!1,msg:"",type:"",className:""}},a.handleUserInput=function(e){var t=e.target.name,n=e.target.value;a.setState(Object(F.a)({},t,n))},a.updateCity=function(){var e=a.state,t=e.cityName,n=e.cityDescription;g.a.put("http://localhost:8080/city/update/"+a.props.update._id,{cityName:t,cityDescription:n}).then(function(e){a.setState({msgProps:{bool:!0,msg:"City Updated",type:"Success",className:"alert alert-success"}}),a.clearCache()}).catch(function(e){throw a.setState({msgProps:{bool:!0,msg:"Error",type:"Warning",className:"alert alert-warning"}}),a.clearCache(),e})},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"clearCache",value:function(){this.setState({cityName:"",cityDescription:""})}},{key:"render",value:function(){var e=this;return s.a.createElement(V,null,s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"offset-md-4 col-md-4 "},s.a.createElement("label",{htmlFor:"cityName"},"City Name:"),s.a.createElement("input",{type:"text",required:"",onChange:function(t){return e.handleUserInput(t)},value:this.state.cityName,name:"cityName",className:"form-control"})),s.a.createElement("div",{className:"offset-md-4 col-md-4 "},s.a.createElement("label",{htmlFor:"cityDescription"},"Description:"),s.a.createElement("textarea",{onChange:function(t){return e.handleUserInput(t)},value:this.state.cityDescription,className:"form-control",rows:"5",id:"comment",name:"cityDescription"}))),s.a.createElement("button",{className:"btn btn-success",onClick:this.updateCity,style:{margin:"10px"}},"Update"),1==this.state.msgProps.bool?s.a.createElement(_,this.state.msgProps):null)}}]),t}(s.a.Component),X=(a(236),function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(s)))).state={cities:[],name:a.props.update.name,description:a.props.update.description,fromCity:a.props.update.fromCity,toCity:a.props.update.toCity,fromCityTime:a.props.update.fromCityTime,toCityTime:a.props.update.toCityTime,duration:a.props.update.duration,totalSeats:a.props.update.totalSeats,price:a.props.update.price,msgProps:{bool:!1,msg:"",type:"",className:""}},a.updateBus=function(){console.log(a.props.update._id);var e=a.state,t=e.name,n=e.description,s=e.fromCity,r=e.toCity,i=e.fromCityTime,c=e.toCityTime,o=e.duration,l=e.totalSeats,u=e.price;g.a.put("http://localhost:8080/bus/update/"+a.props.update._id,{name:t,description:n,fromCity:s,toCity:r,fromCityTime:i,toCityTime:c,duration:o,totalSeats:l,price:u}).then(function(e){a.setState({msgProps:{bool:!0,msg:"Bus Updated",type:"Success",className:"alert alert-success"}}),a.clearCache()}).catch(function(e){throw a.setState({msgProps:{bool:!0,msg:"Error",type:"Warning",className:"alert alert-warning"}}),a.clearCache(),e})},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;g.a.get("http://localhost:8080/city/viewCity").then(function(t){e.setState({cities:t.data.cities})}).catch(function(e){throw e})}},{key:"handleUserInput",value:function(e){var t=e.target.name,a=e.target.value;"totalSeats"===t&&(a*=5),this.setState(Object(F.a)({},t,a))}},{key:"clearCache",value:function(){this.setState({name:"",description:"",fromCity:"",toCity:"",fromCityTime:"",toCityTime:"",duration:0,totalSeats:0,price:0})}},{key:"render",value:function(){var e=this,t=this.state.cities.map(function(e){return s.a.createElement("option",{value:e.cityName,key:e._id},e.cityName)});return s.a.createElement("div",{className:"Updatebus"},s.a.createElement("label",{htmlFor:"fromCity"},"From City:"),s.a.createElement("select",{name:"fromCity",onChange:function(t){return e.handleUserInput(t)},defaultValue:this.state.fromCity},t),s.a.createElement("label",{htmlFor:"toCity"},"To City:"),s.a.createElement("select",{name:"toCity",onChange:function(t){return e.handleUserInput(t)},defaultValue:this.state.toCity},t),s.a.createElement("br",null),s.a.createElement("label",{htmlFor:"name"},"Bus Name:"),s.a.createElement("input",{type:"text",onChange:function(t){return e.handleUserInput(t)},value:this.state.name,name:"name"}),s.a.createElement("label",{htmlFor:"duration"},"Duration:"),s.a.createElement("input",{type:"number",onChange:function(t){return e.handleUserInput(t)},value:this.state.duration,name:"duration",placeholder:"Duration Time"}),s.a.createElement("br",null),s.a.createElement("textarea",{onChange:function(t){return e.handleUserInput(t)},value:this.state.description,placeholder:"Description",className:"form-control",rows:"5",id:"comment",name:"description"}),s.a.createElement("label",{htmlFor:"fromCityTime"},"Source Time:"),s.a.createElement("input",{type:"text",onChange:function(t){return e.handleUserInput(t)},value:this.state.fromCityTime,name:"fromCityTime",placeholder:"Source Time"}),s.a.createElement("label",{htmlFor:"toCityTime"},"Destination Time:"),s.a.createElement("input",{type:"text",onChange:function(t){return e.handleUserInput(t)},value:this.state.toCityTime,name:"toCityTime",placeholder:"Destination Time"}),s.a.createElement("br",null),s.a.createElement("label",{htmlFor:"price"},"Price:"),s.a.createElement("input",{type:"number",onChange:function(t){return e.handleUserInput(t)},value:this.state.price,name:"price",placeholder:"Price"}),s.a.createElement("label",{htmlFor:"totalSeats"},"Total row of seats in Bus:"),s.a.createElement("input",{type:"number",onChange:function(t){return e.handleUserInput(t)},value:this.state.totalSeats/5,name:"totalSeats",placeholder:"Total row of seats in Bus"}),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("button",{className:"btn btn-success",onClick:this.updateBus,style:{margin:"10px"}},"Update Bus"),1==this.state.msgProps.bool?s.a.createElement(_,this.state.msgProps):null)}}]),t}(n.Component)),Z=(a(238),a(240),function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(s)))).state={classSeatStatus:a.props.rowstatus.slice()},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"SeatView"},s.a.createElement("div",{className:this.state.classSeatStatus[0]},this.props.children,"1"),s.a.createElement("div",{className:this.state.classSeatStatus[1]},this.props.children,"2"),s.a.createElement("div",{className:this.state.classSeatStatus[2]},this.props.children,"3"),s.a.createElement("div",{className:"Gap"}),s.a.createElement("div",{className:this.state.classSeatStatus[3]},this.props.children,"4"),s.a.createElement("div",{className:this.state.classSeatStatus[4]},this.props.children,"5"))}}]),t}(n.Component)),ee=function(e){var t=e.seatStatus.map(function(e){return s.a.createElement(Z,{rowstatus:e.status},e.row)});return s.a.createElement("div",{className:"SeatBooked"},t,s.a.createElement("button",{type:"button",className:"btn btn-warning",onClick:e.cancel},"Cancel"),s.a.createElement("div",{class:"alert alert-warning"},s.a.createElement("strong",null,"Not Allowed!")," User had already booked the ticket in this bus."))},te=(a(242),function(e){return e.show?s.a.createElement("div",{className:"Backdrop"},e.children):null}),ae=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(s)))).state={busses:[],display:"menu",cities:[],updateCity:null,updateBus:null,showSeat:!1,bus:{}},a.viewCity=function(){g.a.get("http://localhost:8080/city/viewCity").then(function(e){var t=e.data.cities;a.setState({cities:t})}).catch(function(e){throw e})},a.deleteCity=function(e){g.a.delete("http://localhost:8080/city/delete/"+e).then(function(e){a.viewCity()})},a.updateCity=function(e){var t=a.state.cities.find(function(t){return t._id===e});a.setState({updateCity:t}),a.navigateTo("updateCity")},a.viewBusses=function(){g.a.get("http://localhost:8080/bus/viewBus").then(function(e){var t=e.data.busses;a.setState({busses:t})}).catch(function(e){throw e})},a.deleteBus=function(e){for(var t=a.state.busses.find(function(t){return t._id===e}),n=!1,s=0;s<t.seatStatus.length;s++)if(t.seatStatus[s].status.includes("booked")){n=!0;break}n?a.setState({bus:t,showSeat:!0}):g.a.delete("http://localhost:8080/bus/delete/"+e).then(function(e){a.viewBusses()})},a.updateBus=function(e){for(var t=a.state.busses.find(function(t){return t._id===e}),n=!1,s=0;s<t.seatStatus.length;s++)if(t.seatStatus[s].status.includes("booked")){n=!0;break}n?a.setState({bus:t,showSeat:!0}):(a.setState({updateBus:t}),a.navigateTo("updateBus"))},a.viewBusListBooked=function(){g.a.get("http://localhost:8080/bus/viewBus").then(function(e){var t=e.data.busses;t=t.filter(function(e){for(var t=!1,a=0;a<e.seatStatus.length;a++)if(e.seatStatus[a].status.includes("booked")){t=!0;break}return t}),a.setState({busses:t})}).catch(function(e){throw e})},a.cancelSeatView=function(){a.setState({showSeat:!1})},a.navigateTo=function(e){"viewCity"==e&&a.viewCity(),"viewBusList"==e&&a.viewBusses(),"viewBusListBooked"==e&&a.viewBusListBooked(),a.setState({display:e})},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=null;switch(this.state.display){case"menu":t=s.a.createElement(V,null,s.a.createElement(H,{clicked:function(){return e.navigateTo("viewBusList")}},"View Bus List"),s.a.createElement("br",null),s.a.createElement(H,{clicked:function(){return e.navigateTo("addBus")}},"Add Bus"),s.a.createElement("br",null),s.a.createElement(H,{clicked:function(){return e.navigateTo("viewBusListBooked")}},"View list of buses booked"),s.a.createElement("br",null),s.a.createElement(H,{clicked:function(){return e.navigateTo("viewCity")}},"View Cities"),s.a.createElement("br",null),s.a.createElement(H,{clicked:function(){return e.navigateTo("addCity")}},"Add City"),s.a.createElement("br",null),s.a.createElement(H,{clicked:function(){return e.navigateTo()}},"Chart - Top destination cities"));break;case"addCity":t=s.a.createElement(V,null,s.a.createElement("input",{type:"button",onClick:function(){return e.navigateTo("menu")},className:"BackToMenu",value:"<- Back To Menu"}),s.a.createElement(Y,{update:this.state.updateCity}));break;case"viewCity":t=s.a.createElement(V,null,s.a.createElement("input",{type:"button",onClick:function(){return e.navigateTo("menu")},className:"BackToMenu",value:"<- Back To Menu"}),s.a.createElement(K,{cities:this.state.cities,delete:this.deleteCity,update:this.updateCity}));break;case"updateCity":t=s.a.createElement(V,null,s.a.createElement("input",{type:"button",onClick:function(){return e.navigateTo("menu")},className:"BackToMenu",value:"<- Back To Menu"}),s.a.createElement(Q,{update:this.state.updateCity}));break;case"addBus":t=s.a.createElement(V,null,s.a.createElement("input",{type:"button",onClick:function(){return e.navigateTo("menu")},className:"BackToMenu",value:"<- Back To Menu"}),s.a.createElement(q,null));break;case"viewBusList":t=s.a.createElement(V,null,s.a.createElement(te,{show:this.state.showSeat},s.a.createElement(ee,{cancel:this.cancelSeatView,seatStatus:this.state.bus.seatStatus})),s.a.createElement("input",{type:"button",onClick:function(){return e.navigateTo("menu")},className:"BackToMenu",value:"<- Back To Menu"}),s.a.createElement(z,{busses:this.state.busses,delete:this.deleteBus,update:this.updateBus}));break;case"updateBus":t=s.a.createElement(V,null,s.a.createElement("input",{type:"button",onClick:function(){return e.navigateTo("menu")},className:"BackToMenu",value:"<- Back To Menu"}),s.a.createElement(X,{update:this.state.updateBus}));break;case"viewBusListBooked":t=s.a.createElement(V,null,s.a.createElement(te,{show:this.state.showSeat},s.a.createElement(ee,{cancel:this.cancelSeatView,seatStatus:this.state.bus.seatStatus})),s.a.createElement("input",{type:"button",onClick:function(){return e.navigateTo("menu")},className:"BackToMenu",value:"<- Back To Menu"}),s.a.createElement(z,{busses:this.state.busses,delete:this.deleteBus,update:this.updateBus}))}return s.a.createElement("div",null,s.a.createElement("h1",null,"WELCOME ADMIN"),t)}}]),t}(s.a.Component),ne=(a(244),a(246),function(e){console.log(e);var t={fontWeight:"normal",fontSize:"25px",margin:"auto"};return s.a.createElement(V,null,s.a.createElement("div",{className:"row bus"},s.a.createElement("div",{className:"col-md-3"},s.a.createElement("p",{className:"BusDetail"},e.busName),s.a.createElement("p",null,e.busDescription)),s.a.createElement("div",{className:"col-md-3 ",style:{margin:"auto"}},s.a.createElement("p",{style:t},e.sourceTime),s.a.createElement("p",null,e.source)),s.a.createElement("div",{className:"col-md-2",style:{margin:"auto"}},s.a.createElement("p",{style:t},e.destinationTime),s.a.createElement("p",null,e.destination)),s.a.createElement("div",{className:"col-md-2",style:{margin:"auto"}},e.duration," hrs"),s.a.createElement("div",{className:"col-md-2 ",style:{margin:"auto"}},s.a.createElement("p",null,"\u20b9 ",e.price),s.a.createElement("button",{type:"button",className:"btn btn-success",onClick:e.book},"Book Now"))))}),se=(a(248),function(e){console.log(e);var t=e.bussesList.map(function(t){return s.a.createElement(ne,{busName:t.name,busDescription:t.description,sourceTime:t.fromCityTime,destinationTime:t.toCityTime,price:t.price,key:t._id,book:function(){return e.book(t._id)},source:t.fromCity,destination:t.toCity,duration:t.duration})});return s.a.createElement(V,null,s.a.createElement("div",{className:"row BusHeading"},s.a.createElement("div",{className:"col-md-3"}),s.a.createElement("div",{className:"col-md-3 "},"DEPARTURE"),s.a.createElement("div",{className:"col-md-2"},"ARIVAL"),s.a.createElement("div",{className:"col-md-2 "},"DURATION"),s.a.createElement("div",{className:"col-md-2 Price"},"PRICE")),e.bussesList.length>0?t:s.a.createElement("span",null,"No Bus Found"))}),re=(a(250),function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(s)))).state={fromCity:"",toCity:"",cities:""},a.func=function(){console.log(a.refs.leaving),a.props.search(a.refs.leavingFrom.value,a.refs.goingTo.value,a.refs.leavingDate.value)},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"handleUserInput",value:function(e){var t=e.target.name,a=e.target.value;this.setState(Object(F.a)({},t,a))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("input",{className:"search",type:"text",onChange:function(t){return e.handleUserInput(t)},value:this.state.fromCity,name:"fromCity",placeholder:" \u2197 Leaving From"}),s.a.createElement("br",null),s.a.createElement("input",{className:"search",type:"text",onChange:function(t){return e.handleUserInput(t)},value:this.state.toCity,name:"toCity",placeholder:"\u2199 Going To"}),s.a.createElement("br",null),s.a.createElement("input",{className:"search",ref:"leavingDate",placeholder:"\u2199 Going To",type:"date"}),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("button",{className:"btn btn-primary",onClick:function(){return e.props.search(e.state.fromCity,e.state.toCity)},style:{margin:"10px"}},"Search"))}}]),t}(n.Component)),ie=(a(252),a(254),function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(s)))).state={classSeatStatus:a.props.rowstatus.slice()},a.bookTicket=function(e){var t=a.state.classSeatStatus.slice();"booking"===t[e]?(t[e]="unbooked",a.props.booking(a.props.children+(e+1))):"unbooked"===t[e]&&(t[e]="booking",a.props.booking(a.props.children+(e+1))),a.setState({classSeatStatus:t})},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"Seat"},s.a.createElement("div",{className:this.state.classSeatStatus[0],onClick:function(){return e.bookTicket(0)}},this.props.children,"1"),s.a.createElement("div",{className:this.state.classSeatStatus[1],onClick:function(){return e.bookTicket(1)}},this.props.children,"2"),s.a.createElement("div",{className:this.state.classSeatStatus[2],onClick:function(){return e.bookTicket(2)}},this.props.children,"3"),s.a.createElement("div",{className:"Gap"}),s.a.createElement("div",{className:this.state.classSeatStatus[3],onClick:function(){return e.bookTicket(3)}},this.props.children,"4"),s.a.createElement("div",{className:this.state.classSeatStatus[4],onClick:function(){return e.bookTicket(4)}},this.props.children,"5"))}}]),t}(n.Component)),ce=a(263),oe=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(s)))).state={seatBooking:[]},a.seatBookingArray=function(e){var t=a.state.seatBooking.slice();t.includes(e)?t=t.filter(function(t){return t!==e}):t.push(e),a.setState({seatBooking:t})},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.props.seatStatus.map(function(t){return s.a.createElement(ie,{booking:e.seatBookingArray,rowstatus:t.status,key:t.row},t.row)});return s.a.createElement("div",{className:"SeatSelection"},t,s.a.createElement(ce.a,{color:"warning",onClick:this.props.cancel},"Cancel"),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement(ce.a,{color:"success",onClick:function(){return e.props.confirmSeat(e.state.seatBooking)}},"Confirm Seat"))}}]),t}(n.Component),le=(a(256),function(e){var t=e.seatBooked.map(function(e){return s.a.createElement("p",{key:e},e)});return console.log(e.seatBooked),s.a.createElement("div",{className:"ConfirmBooking"},"Seat Booked:",s.a.createElement("br",null),t,s.a.createElement("br",null),s.a.createElement("button",{className:"btn btn-warning",onClick:e.cancel},"Cancel"),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("button",{className:"btn btn-success",onClick:e.proceedToPayment},"Proceed To Payment"))}),ue=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).searchBuses=function(e,t,n){console.log(e,t,n);var s=a.state.busses.filter(function(a){return e.toLowerCase()===a.fromCity.toLowerCase()&&t.toLowerCase()===a.toCity.toLowerCase()});a.setState({bus:s})},a.bookbus=function(e){var t=a.state.busses.find(function(t){return e===t._id});a.setState({seatStatus:t.seatStatus}),a.setState({SeatSelection:!0}),a.setState({busId:e}),console.log("1",t.seatStatus)},a.cancelBooking=function(){a.setState({SeatSelection:!1}),a.setState({confirmSeat:!1})},a.confirmSeat=function(e){console.log("2",a.state.seatStatus),a.setState({seatBooked:e}),a.setState({SeatSelection:!1}),a.setState({confirmSeat:!0})},a.proceedToPayment=function(){for(var e=a.state.seatBooked,t=a.state.seatStatus.slice(),n=function(a){var n=e[a][0],s=parseInt(e[a][1]);t=t.map(function(e){return e.row===n&&(e.status[s-1]="booked"),e})},s=0;s<e.length;s++)n(s);console.log("3.",a.state.seatStatus),console.log("4",t),g.a.put("http://localhost:8080/bus/seatUpdate/"+a.state.busId,{seatStatus:t}).then(function(e){}).catch(function(e){throw e}),console.log(t),a.setState({SeatSelection:!1}),a.setState({confirmSeat:!1}),alert("PAYMENT SUCCESSFILL")},a.state={busses:[],bus:[],seatStatus:[],SeatSelection:!1,confirmSeat:!1,seatBooked:[],busId:null},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;g.a.get("http://localhost:8080/bus/viewBus").then(function(t){var a=t.data.busses;e.setState({busses:a})}).catch(function(e){throw e})}},{key:"render",value:function(){return console.log("=====>",this.props),s.a.createElement("div",null,s.a.createElement(te,{show:this.state.SeatSelection},s.a.createElement(oe,{cancel:this.cancelBooking,seatStatus:this.state.seatStatus,confirmSeat:this.confirmSeat})),s.a.createElement(te,{show:this.state.confirmSeat},s.a.createElement(le,{seatBooked:this.state.seatBooked,cancel:this.cancelBooking,proceedToPayment:this.proceedToPayment})),s.a.createElement("h1",null,"WELCOME USER"),s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-12"},s.a.createElement(re,{search:this.searchBuses}))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-12"},s.a.createElement(se,{bussesList:this.state.bus,book:this.bookbus})))))}}]),t}(n.Component),me=Object(c.b)(function(e){return{auth:e.user}},null)(ue),de=(a(258),function(e){var t=e.formErrors;return s.a.createElement("div",{className:"formErrors"},Object.keys(t).map(function(e,a){return t[e].length>0?s.a.createElement("div",{key:a,className:"alert alert-warning"},s.a.createElement("strong",null,"Warning!")," ",e," ",t[e],"."):""}))}),pe=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={fname:"",lname:"",username:"",email:"",mob:"",password:"",formErrors:{email:"",password:""},emailValid:!1,passwordValid:!1,formValid:!1,msgProps:{bool:!1,msg:"",type:"",className:""}},a.addNewRegistrants=a.addNewRegistrants.bind(Object(L.a)(Object(L.a)(a))),a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"validateField",value:function(e,t){var a=this.state.formErrors,n=this.state.emailValid,s=this.state.passwordValid;switch(e){case"email":n=t.match(/^([\w.%+-]+)@([\w-]+\.)+([\w]{2,})$/i),a.email=n?"":" is invalid";break;case"password":s=t.length>=6,a.password=s?"":" is too short"}this.setState({formErrors:a,emailValid:n,passwordValid:s},this.validateForm)}},{key:"validateForm",value:function(){this.setState({formValid:this.state.emailValid&&this.state.passwordValid})}},{key:"errorClass",value:function(e){return 0===e.length?"":"has-error"}},{key:"handleUserInput",value:function(e){var t=this,a=e.target.name,n=e.target.value;this.setState(Object(F.a)({},a,n),function(){t.validateField(a,n)})}},{key:"addNewRegistrants",value:function(){var e=this,t=this.state,a=t.fname,n=t.lname,s=t.password,r=t.mob,i=t.email,c=t.username;g.a.post("/addUsers",{firstname:a,lastname:n,username:c,password:s,mobile_no:r,email:i}).then(function(t){e.setState({msgProps:{bool:!0,msg:"Registration Done",type:"Success",className:"alert alert-success"}}),e.clearCache()}).catch(function(t){throw e.setState({msgProps:{bool:!0,msg:"Registration Failed",type:"Warning",className:"alert alert-warning"}}),e.clearCache(),t})}},{key:"clearCache",value:function(){this.setState({fname:"",lname:"",username:"",email:"",mob:"",password:"",formErrors:{email:"",password:""},emailValid:!1,passwordValid:!1,formValid:!1})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-4 center-block"},s.a.createElement("div",{className:"form_main"},s.a.createElement("h4",{className:"heading"},s.a.createElement("strong",null,"Create ")," Account ",s.a.createElement("span",null)),s.a.createElement("div",{className:"form"},s.a.createElement("form",{id:"contactFrm",name:"contactFrm"},s.a.createElement("div",{className:"panel panel-default"},s.a.createElement(de,{formErrors:this.state.formErrors})),s.a.createElement("input",{type:"text",required:"",placeholder:"First Name",onChange:function(t){return e.handleUserInput(t)},value:this.state.fname,name:"fname",className:"txt"}),s.a.createElement("input",{type:"text",required:"",placeholder:"Last Name",onChange:function(t){return e.handleUserInput(t)},value:this.state.lname,name:"lname",className:"txt"}),s.a.createElement("input",{type:"text",required:"",placeholder:"User Name",onChange:function(t){return e.handleUserInput(t)},value:this.state.username,name:"username",className:"txt"}),s.a.createElement("input",{type:"password",required:"",placeholder:"Password",onChange:function(t){return e.handleUserInput(t)},value:this.state.password,name:"password",className:"txt"}),s.a.createElement("input",{type:"text",required:"",placeholder:"Mobile No",onChange:function(t){return e.handleUserInput(t)},value:this.state.mob,name:"mob",className:"txt"}),s.a.createElement("input",{type:"email",required:"",placeholder:"Email",onChange:function(t){return e.handleUserInput(t)},value:this.state.email,name:"email",className:"txt"}),s.a.createElement("input",{type:"button",disabled:!this.state.formValid,value:"submit",name:"submit",onClick:function(){return e.addNewRegistrants()},className:"subButton"}),s.a.createElement(C.a,{className:"subButton button__padding",to:"/login"},"Back To Login"))),1==this.state.msgProps.bool?s.a.createElement(_,this.state.msgProps):null))))}}]),t}(s.a.Component),he={isAuthenticated:!1,authenticate:function(e){this.isAuthenticated=!0,setTimeout(e,100)},signout:function(e){this.isAuthenticated=!1,setTimeout(e,100)}},fe=(Object(b.a)(function(e){var t=e.history;return he.isAuthenticated?s.a.createElement("p",null,"Welcome!"," ",s.a.createElement("button",{onClick:function(){he.signout(function(){return t.push("/")})}},"Sign out")):null}),function(e){var t=e.component,a=Object(f.a)(e,["component"]);return s.a.createElement(y.a,Object.assign({},a,{render:function(e){return s.a.createElement(t,e)}}))}),be=function(e){function t(e){return Object(u.a)(this,t),Object(d.a)(this,Object(p.a)(t).call(this,e))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=window.location.search;-1!=t.indexOf("?token=")&&t.split("?token=")[1]&&g.a.get("/login/authUser",{params:{token:t.split("?token=")[1]}}).then(function(t){e.props.dispatch(R(t.data))}).catch(function(e){throw e})}},{key:"render",value:function(){return s.a.createElement(E.a,null,s.a.createElement("div",{className:"App"},s.a.createElement(A,null),s.a.createElement("div",null,s.a.createElement(y.a,{exact:!0,path:"/login",component:G}),s.a.createElement(fe,Object.assign({path:"/admin"},this.props,{component:ae})),s.a.createElement(fe,Object.assign({path:"/user"},this.props,{component:me})),s.a.createElement(y.a,{path:"/register",component:pe}))))}}]),t}(n.Component),ye=Object(c.b)(function(e){return{auth:e.user}},null)(be);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ee=a(32),ve={userAccess:!1,user:[]},ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve,t=arguments.length>1?arguments[1]:void 0,a=t.payload;switch(t.type){case"LOGIN_USER":return console.log("hiiiiiiiiii"),a.userAccess="LoggedIn"===a.login,e=Object(Ee.a)({},a),Object(Ee.a)({},e);case"LOGOUT_USER":return console.log("byrrrrrrrrr"),e={},Object(Ee.a)({},e);case"LOGIN_ADMIN":return a.adminAccess="LoggedIn"===a.login,e=Object(Ee.a)({},a),Object(Ee.a)({},e);default:return e}},Ce=Object(o.c)({user:ge}),Ne=Object(o.d)(Ce,Object(o.a)(l.a));i.a.render(s.a.createElement(c.a,{store:Ne},s.a.createElement(ye,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},97:function(e,t,a){e.exports=a(260)}},[[97,2,1]]]);
//# sourceMappingURL=main.d1946df2.chunk.js.map